{"version":3,"file":"static/js/766.d67d8340.chunk.js","mappings":"0NAiIA,UAzHwB,WACtB,IAAMA,GAAcC,EAAAA,EAAAA,MACdC,GAAWC,EAAAA,EAAAA,MAEjBC,IADaC,EAAAA,EAAAA,KAAY,SAACC,GAAK,OAAKA,EAAMC,KAAKA,IAAI,KACXC,EAAAA,EAAAA,UAAS,KAAGC,GAAAC,EAAAA,EAAAA,GAAAN,EAAA,GAA7CO,EAAYF,EAAA,GAAEG,EAAeH,EAAA,GACpCI,GAA8CL,EAAAA,EAAAA,UAAS,IAAGM,GAAAJ,EAAAA,EAAAA,GAAAG,EAAA,GAAnDE,EAAeD,EAAA,GAAEE,EAAkBF,EAAA,GAC1CG,GAAwBT,EAAAA,EAAAA,UACtB,gEACDU,GAAAR,EAAAA,EAAAA,GAAAO,EAAA,GAFME,EAAID,EAAA,GAAEE,EAAOF,EAAA,GAkBdG,EAAY,eAAAC,GAAAC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAG,SAAAC,EAAOC,GAAC,IAAAC,EAAAC,EAAA,OAAAL,EAAAA,EAAAA,KAAAM,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,OAIJ,OAHvBN,EAAEO,iBACFlB,EAAmB,IACnBJ,EAAgB,IAChBV,EAAS,cAAc6B,EAAAE,KAAA,GAEFE,EAAAA,EAAAA,KAAOC,EAAAA,EAAAA,IAAWC,EAAAA,GAAI,cAAe,CACxDC,QAAoB,OAAXtC,QAAW,IAAXA,OAAW,EAAXA,EAAauC,IACtB5B,aAAAA,EACAI,gBAAAA,IACC,KAAD,EAE6D,GANzDa,EAAMG,EAAAS,KAMNX,GAAWY,EAAAA,EAAAA,IAAIC,EAAAA,GAAQ,cAADC,OAAgBf,EAAOgB,GAAE,WAG1C,iEAATzB,EAAuE,CAAAY,EAAAE,KAAA,gBAAAF,EAAAE,KAAA,IAEjEY,EAAAA,EAAAA,IAAahB,EAAUV,EAAM,YAAY2B,MAAIvB,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,KAAAC,MAAC,SAAAsB,IAAA,IAAAC,EAAA,OAAAxB,EAAAA,EAAAA,KAAAM,MAAA,SAAAmB,GAAA,cAAAA,EAAAjB,KAAAiB,EAAAhB,MAAA,cAAAgB,EAAAhB,KAAA,GAExBiB,EAAAA,EAAAA,IAAerB,GAAU,KAAD,EAAjC,OAAXmB,EAAWC,EAAAT,KAAAS,EAAAhB,KAAA,GAGXkB,EAAAA,EAAAA,KAAUC,EAAAA,EAAAA,IAAIf,EAAAA,GAAI,aAAcT,EAAOgB,IAAK,CAChDzB,KAAM6B,IACL,KAAD,mBAAAC,EAAAI,OAAA,GAAAN,EAAA,MAID,KAAD,oBAAAhB,EAAAsB,OAAA,GAAA3B,EAAA,KAEL,gBA9BiB4B,GAAA,OAAAhC,EAAAiC,MAAA,KAAAC,UAAA,KAgClB,OACEC,EAAAA,EAAAA,MAAA,OAAKC,UAAU,iFAAgFC,SAAA,EAC7FC,EAAAA,EAAAA,KAAA,MAAIF,UAAU,sDAAqDC,SAAC,4BAIpEF,EAAAA,EAAAA,MAAA,QAAMC,UAAU,uBAAuBG,SAAUxC,EAAasC,SAAA,EAE5DC,EAAAA,EAAAA,KAAA,SACEE,KAAK,OACLC,UAAQ,EACRL,UAAU,oEACVd,GAAG,eACHoB,MACa,OAAXhE,QAAW,IAAXA,GAAAA,EAAaiE,YAAyB,OAAXjE,QAAW,IAAXA,OAAW,EAAXA,EAAaiE,YAActD,EAExDuD,YAAW,GAAAvB,OACE,OAAX3C,QAAW,IAAXA,GAAAA,EAAaiE,YACE,OAAXjE,QAAW,IAAXA,OAAW,EAAXA,EAAaiE,YACb,iBAENE,SAAU,SAACxC,GAAC,OAAKf,EAAgBe,EAAEyC,OAAOJ,MAAM,KAElDJ,EAAAA,EAAAA,KAAA,SACEE,KAAK,OACLC,UAAQ,EACRL,UAAU,oEACVd,GAAG,kBACHoB,MAAOjD,EACPmD,YAAY,mBACZC,SAAU,SAACxC,GAAC,OAAKX,EAAmBW,EAAEyC,OAAOJ,MAAM,KAGrDP,EAAAA,EAAAA,MAAA,OAAKC,UAAU,qCAAoCC,SAAA,EACjDC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,sBAAqBC,UAClCC,EAAAA,EAAAA,KAAA,OAAKS,IAAKlD,EAAMmD,IAAI,OAAOZ,UAAU,6BAGvCD,EAAAA,EAAAA,MAAA,OAAKC,UAAU,uBAAsBC,SAAA,EACnCC,EAAAA,EAAAA,KAAA,SAAOW,QAAQ,OAAOb,UAAU,eAAcC,SAAC,iBAG/CC,EAAAA,EAAAA,KAAA,SACEE,KAAK,OACLU,OAAO,UACPT,UAAQ,EACRL,UAAU,uBACVd,GAAG,OACHuB,SA3Fa,SAACxC,GACxB,IAAM8C,EAAS,IAAIC,WACf/C,EAAEyC,OAAOO,MAAM,IACjBF,EAAOG,cAAcjD,EAAEyC,OAAOO,MAAM,IAEtCF,EAAOI,OAAS,SAACC,GACf1D,EAAQ0D,EAAYV,OAAOW,OAC7B,CACF,WAwFMnB,EAAAA,EAAAA,KAAA,UACEF,UAAU,oHAEwBC,SACnC,0BAMT,C","sources":["pages/BusinessProfile.jsx"],"sourcesContent":["import { addDoc, collection, doc, updateDoc } from \"firebase/firestore\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nimport React, { useState } from \"react\";\r\nimport { getDownloadURL, ref, uploadString } from \"firebase/storage\";\r\nimport db, { storage, useAuth } from \"../db/firebase\";\r\n\r\nconst BusinessProfile = () => {\r\n  const currentUser = useAuth();\r\n  const navigate = useNavigate();\r\n  const user = useSelector((state) => state.user.user);\r\n  const [businessName, setBusinessName] = useState(\"\");\r\n  const [businessAddress, setBusinessAddress] = useState(\"\");\r\n  const [logo, setLogo] = useState(\r\n    \"https://www.pesmcopt.com/admin-media/images/default-logo.png\"\r\n  );\r\n\r\n  {\r\n    /* The handleFileReader function converts the business logo (image file) to base64 */\r\n  }\r\n  const handleFileReader = (e) => {\r\n    const reader = new FileReader();\r\n    if (e.target.files[0]) {\r\n      reader.readAsDataURL(e.target.files[0]);\r\n    }\r\n    reader.onload = (readerEvent) => {\r\n      setLogo(readerEvent.target.result);\r\n    };\r\n  };\r\n\r\n  /* The handleSubmit function sends the form details to Firestore */\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault(); //prevents the page from refreshing\r\n    setBusinessAddress(\"\");\r\n    setBusinessName(\"\");\r\n    navigate(\"/dashboard\");\r\n\r\n    const docRef = await addDoc(collection(db, \"businesses\"), {\r\n      user_id: currentUser?.uid,\r\n      businessName,\r\n      businessAddress,\r\n    });\r\n\r\n    const imageRef = ref(storage, `businesses/${docRef.id}/image`);\r\n\r\n    if (\r\n      logo !== \"https://www.pesmcopt.com/admin-media/images/default-logo.png\"\r\n    ) {\r\n      await uploadString(imageRef, logo, \"data_url\").then(async () => {\r\n        //Gets the image URL\r\n        const downloadURL = await getDownloadURL(imageRef);\r\n\r\n        //Updates the docRef, by adding the logo URL to the document\r\n        await updateDoc(doc(db, \"businesses\", docRef.id), {\r\n          logo: downloadURL,\r\n        });\r\n\r\n        //Alerts the user that the process was successful\r\n        // alert(\"Congratulations, you've just created a business profile!\");\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"w-[100%] md:h-[500px]  md:p-8 md:w-2/3 md:shadow mx-auto mt-8 rounded p-3 my-8\">\r\n      <h3 className=\"text-center font-bold text-xl text-dark-purple mb-6\">\r\n        Setup Business Profile\r\n      </h3>\r\n\r\n      <form className=\"w-full flex flex-col\" onSubmit={handleSubmit}>\r\n        {/* The handleSubmit function sends the form details to Firestore */}\r\n        <input\r\n          type=\"text\"\r\n          required\r\n          className=\"py-2 outline-yellow-50 px-4 w-full mb-6 border capitalize rounded\"\r\n          id=\"businessName\"\r\n          value={\r\n            currentUser?.displayName ? currentUser?.displayName : businessName\r\n          }\r\n          placeholder={`${\r\n            currentUser?.displayName\r\n              ? currentUser?.displayName\r\n              : \"Business Name\"\r\n          }`}\r\n          onChange={(e) => setBusinessName(e.target.value)}\r\n        />\r\n        <input\r\n          type=\"text\"\r\n          required\r\n          className=\"py-2 outline-yellow-50 px-4 w-full mb-6 border capitalize rounded\"\r\n          id=\"businessAddress\"\r\n          value={businessAddress}\r\n          placeholder=\"Business Address\"\r\n          onChange={(e) => setBusinessAddress(e.target.value)}\r\n        />\r\n\r\n        <div className=\"flex items-center space-x-4 w-full\">\r\n          <div className=\"flex flex-col w-1/2\">\r\n            <img src={logo} alt=\"Logo\" className=\" w-full max-h-[300px]\" />\r\n          </div>\r\n\r\n          <div className=\"flex flex-col w-full\">\r\n            <label htmlFor=\"logo\" className=\"text-sm mb-1\">\r\n              Upload logo\r\n            </label>\r\n            <input\r\n              type=\"file\"\r\n              accept=\"image/*\"\r\n              required\r\n              className=\"w-full mb-6  rounded\"\r\n              id=\"logo\"\r\n              onChange={handleFileReader}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <button\r\n          className=\"hover:bg-dark-purp-hover bg-dark-purple\r\n                        text-sm md:text-sm text-gray-100 w-full p-[10px] \r\n                        md:p-5 rounded my-6\"\r\n        >\r\n          COMPLETE PROFILE\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BusinessProfile;\r\n"],"names":["currentUser","useAuth","navigate","useNavigate","_useState","useSelector","state","user","useState","_useState2","_slicedToArray","businessName","setBusinessName","_useState3","_useState4","businessAddress","setBusinessAddress","_useState5","_useState6","logo","setLogo","handleSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee2","e","docRef","imageRef","wrap","_context2","prev","next","preventDefault","addDoc","collection","db","user_id","uid","sent","ref","storage","concat","id","uploadString","then","_callee","downloadURL","_context","getDownloadURL","updateDoc","doc","stop","_x","apply","arguments","_jsxs","className","children","_jsx","onSubmit","type","required","value","displayName","placeholder","onChange","target","src","alt","htmlFor","accept","reader","FileReader","files","readAsDataURL","onload","readerEvent","result"],"sourceRoot":""}
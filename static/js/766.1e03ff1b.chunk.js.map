{"version":3,"file":"static/js/766.1e03ff1b.chunk.js","mappings":"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","sources":["pages/BusinessProfile.jsx"],"sourcesContent":["// import { addDoc, collection, doc, updateDoc } from \"firebase/firestore\";\r\n// import { useSelector } from \"react-redux\";\r\n// import { useNavigate } from \"react-router-dom\";\r\n\r\n// import React, { useState } from \"react\";\r\n// import { getDownloadURL, ref, uploadString } from \"firebase/storage\";\r\n// import db, { storage, useAuth } from \"../db/firebase\";\r\n\r\n// const BusinessProfile = () => {\r\n//   const currentUser = useAuth();\r\n//   const navigate = useNavigate();\r\n//   const user = useSelector((state) => state.user.user);\r\n//   const [businessName, setBusinessName] = useState(\"\");\r\n//   const [businessAddress, setBusinessAddress] = useState(\"\");\r\n//   const [logo, setLogo] = useState(\r\n//     \"https://www.pesmcopt.com/admin-media/images/default-logo.png\"\r\n//   );\r\n\r\n//   {\r\n//     /* The handleFileReader function converts the business logo (image file) to base64 */\r\n//   }\r\n//   const handleFileReader = (e) => {\r\n//     const reader = new FileReader();\r\n//     if (e.target.files[0]) {\r\n//       reader.readAsDataURL(e.target.files[0]);\r\n//     }\r\n//     reader.onload = (readerEvent) => {\r\n//       setLogo(readerEvent.target.result);\r\n//     };\r\n//   };\r\n\r\n//   /* The handleSubmit function sends the form details to Firestore */\r\n//   const handleSubmit = async (e) => {\r\n//     e.preventDefault(); //prevents the page from refreshing\r\n//     setBusinessAddress(\"\");\r\n//     setBusinessName(\"\");\r\n//     navigate(\"/dashboard\");\r\n\r\n//     const docRef = await addDoc(collection(db, \"businesses\"), {\r\n//       user_id: currentUser?.uid,\r\n//       businessName,\r\n//       businessAddress,\r\n//     });\r\n\r\n//     const imageRef = ref(storage, `businesses/${docRef.id}/image`);\r\n\r\n//     if (\r\n//       logo !== \"https://www.pesmcopt.com/admin-media/images/default-logo.png\"\r\n//     ) {\r\n//       await uploadString(imageRef, logo, \"data_url\").then(async () => {\r\n//         //Gets the image URL\r\n//         const downloadURL = await getDownloadURL(imageRef);\r\n\r\n//         //Updates the docRef, by adding the logo URL to the document\r\n//         await updateDoc(doc(db, \"businesses\", docRef.id), {\r\n//           logo: downloadURL,\r\n//         });\r\n\r\n//         //Alerts the user that the process was successful\r\n//         // alert(\"Congratulations, you've just created a business profile!\");\r\n//       });\r\n//     }\r\n//   };\r\n\r\n//   return (\r\n//     <div className=\"w-[100%] md:h-[500px]  md:p-8 md:w-2/3 md:shadow mx-auto mt-8 rounded p-3 my-8\">\r\n//       <h3 className=\"text-center font-bold text-xl text-dark-purple mb-6\">\r\n//         Setup Business Profile\r\n//       </h3>\r\n\r\n//       <form className=\"w-full flex flex-col\" onSubmit={handleSubmit}>\r\n//         {/* The handleSubmit function sends the form details to Firestore */}\r\n//         <input\r\n//           type=\"text\"\r\n//           required\r\n//           className=\"py-2 outline-yellow-50 px-4 w-full mb-6 border capitalize rounded\"\r\n//           id=\"businessName\"\r\n//           value={\r\n//             currentUser?.displayName ? currentUser?.displayName : businessName\r\n//           }\r\n//           placeholder={`${\r\n//             currentUser?.displayName\r\n//               ? currentUser?.displayName\r\n//               : \"Business Name\"\r\n//           }`}\r\n//           onChange={(e) => setBusinessName(e.target.value)}\r\n//         />\r\n//         <input\r\n//           type=\"text\"\r\n//           required\r\n//           className=\"py-2 outline-yellow-50 px-4 w-full mb-6 border capitalize rounded\"\r\n//           id=\"businessAddress\"\r\n//           value={businessAddress}\r\n//           placeholder=\"Business Address\"\r\n//           onChange={(e) => setBusinessAddress(e.target.value)}\r\n//         />\r\n\r\n//         <div className=\"flex items-center space-x-4 w-full\">\r\n//           <div className=\"flex flex-col w-1/2\">\r\n//             <img src={logo} alt=\"Logo\" className=\" w-full max-h-[300px]\" />\r\n//           </div>\r\n\r\n//           <div className=\"flex flex-col w-full\">\r\n//             <label htmlFor=\"logo\" className=\"text-sm mb-1\">\r\n//               Upload logo\r\n//             </label>\r\n//             <input\r\n//               type=\"file\"\r\n//               accept=\"image/*\"\r\n//               required\r\n//               className=\"w-full mb-6  rounded\"\r\n//               id=\"logo\"\r\n//               onChange={handleFileReader}\r\n//             />\r\n//           </div>\r\n//         </div>\r\n\r\n//         <button\r\n//           className=\"hover:bg-dark-purp-hover bg-dark-purple\r\n//                         text-sm md:text-sm text-gray-100 w-full p-[10px]\r\n//                         md:p-5 rounded my-6\"\r\n//         >\r\n//           COMPLETE PROFILE\r\n//         </button>\r\n//       </form>\r\n//     </div>\r\n//   );\r\n// };\r\n\r\n// export default BusinessProfile;\r\n\r\nimport React, { useState } from \"react\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { yupResolver } from \"@hookform/resolvers/yup\";\r\nimport * as yup from \"yup\";\r\nimport { addDoc, collection, doc, updateDoc } from \"firebase/firestore\";\r\nimport { getDownloadURL, ref, uploadString } from \"firebase/storage\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nimport db, { storage, useAuth } from \"../db/firebase\";\r\n\r\nconst schema = yup.object().shape({\r\n  businessName: yup.string().required(\"Business Name is required\"),\r\n  businessAddress: yup.string().required(\"Business Address is required\"),\r\n  logo: yup.mixed().required(\"Logo is required\"),\r\n});\r\n\r\nconst BusinessProfile = () => {\r\n  const currentUser = useAuth();\r\n  const navigate = useNavigate();\r\n  const user = useSelector((state) => state.user.user);\r\n  const [logo, setLogo] = useState(\r\n    \"https://www.pesmcopt.com/admin-media/images/default-logo.png\"\r\n  );\r\n\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    formState: { errors },\r\n  } = useForm({\r\n    resolver: yupResolver(schema),\r\n  });\r\n\r\n  const handleFileReader = (e) => {\r\n    const reader = new FileReader();\r\n    if (e.target.files[0]) {\r\n      reader.readAsDataURL(e.target.files[0]);\r\n    }\r\n    reader.onload = (readerEvent) => {\r\n      setLogo(readerEvent.target.result);\r\n    };\r\n  };\r\n\r\n  const onSubmit = async (data) => {\r\n    //setBusinessAddress('');\r\n    // setBusinessName('');\r\n    navigate(\"/dashboard\");\r\n\r\n    const docRef = await addDoc(collection(db, \"businesses\"), {\r\n      user_id: currentUser?.uid,\r\n      businessName: data.businessName,\r\n      businessAddress: data.businessAddress,\r\n    });\r\n\r\n    const imageRef = ref(storage, `businesses/${docRef.id}/image`);\r\n\r\n    if (\r\n      logo !== \"https://www.pesmcopt.com/admin-media/images/default-logo.png\"\r\n    ) {\r\n      await uploadString(imageRef, logo, \"data_url\").then(async () => {\r\n        const downloadURL = await getDownloadURL(imageRef);\r\n\r\n        await updateDoc(doc(db, \"businesses\", docRef.id), {\r\n          logo: downloadURL,\r\n        });\r\n\r\n        //Alerts the user that the process was successful\r\n        // alert(\"Congratulations, you've just created a business profile!\");\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"w-[100%] md:h-[500px]  md:p-8 md:w-2/3 md:shadow mx-auto mt-8 rounded p-3 my-8\">\r\n      <h3 className=\"text-center font-bold text-xl text-dark-purple mb-6\">\r\n        Setup Business Profile\r\n      </h3>\r\n\r\n      <form className=\"w-full flex flex-col\" onSubmit={handleSubmit(onSubmit)}>\r\n        {/* The handleSubmit function sends the form details to Firestore */}\r\n        <input\r\n          type=\"text\"\r\n          className=\"py-2 outline-yellow-50 px-4 w-full mb-6 border capitalize rounded\"\r\n          id=\"businessName\"\r\n          placeholder=\"Business Name\"\r\n          {...register(\"businessName\")}\r\n        />\r\n        {errors?.businessName && (\r\n          <span className=\"text-[red]\" role=\"alert\">\r\n            {errors.businessName.message}\r\n          </span>\r\n        )}\r\n\r\n        <input\r\n          type=\"text\"\r\n          className=\"py-2 outline-yellow-50 px-4 w-full mb-6 border capitalize rounded\"\r\n          id=\"businessAddress\"\r\n          placeholder=\"Business Address\"\r\n          {...register(\"businessAddress\")}\r\n        />\r\n        {errors?.businessAddress && (\r\n          <span className=\"text-[red]\" role=\"alert\">\r\n            {errors.businessAddress.message}\r\n          </span>\r\n        )}\r\n\r\n        <div className=\"flex items-center space-x-4 w-full\">\r\n          <div className=\"flex flex-col w-1/2\">\r\n            <img src={logo} alt=\"Logo\" className=\" w-full max-h-[300px]\" />\r\n          </div>\r\n\r\n          <div className=\"flex flex-col w-full\">\r\n            <label htmlFor=\"logo\" className=\"text-sm mb-1\">\r\n              Upload logo\r\n            </label>\r\n            <input\r\n              type=\"file\"\r\n              accept=\"image/*\"\r\n              className=\"w-full mb-6  rounded\"\r\n              id=\"logo\"\r\n              {...register(\"logo\")}\r\n              onChange={handleFileReader}\r\n            />\r\n            {errors.logo && (\r\n              <span className=\"text-[red]\" role=\"alert\">\r\n                {errors.logo.message}\r\n              </span>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        <button\r\n          className=\"hover:bg-dark-purp-hover bg-dark-purple\r\n                        text-sm md:text-sm text-gray-100 w-full p-[10px] \r\n                        md:p-5 rounded my-6\"\r\n          type=\"submit\"\r\n        >\r\n          COMPLETE PROFILE\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BusinessProfile;\r\n"],"names":["schema","yup","shape","businessName","required","businessAddress","logo","currentUser","useAuth","navigate","useNavigate","_useState","useSelector","state","user","useState","_useState2","_slicedToArray","setLogo","_useForm","useForm","resolver","yupResolver","register","handleSubmit","errors","formState","onSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee2","data","docRef","imageRef","wrap","_context2","prev","next","addDoc","collection","db","user_id","uid","sent","ref","storage","concat","id","uploadString","then","_callee","downloadURL","_context","getDownloadURL","updateDoc","doc","stop","_x","apply","arguments","_jsxs","className","children","_jsx","_objectSpread","type","placeholder","role","message","src","alt","htmlFor","accept","onChange","e","reader","FileReader","target","files","readAsDataURL","onload","readerEvent","result"],"sourceRoot":""}